<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>

        div{
            width: 50px;
            height: 50px;
            background-color: red;
            position: absolute;
        }


    </style>
</head>
<body>


<div></div>

<script>


    /*
    *
    * 上下左右移动人物
    *
    * 回车     13
     左键     37
     上键     38
     右键     39
     下键     40
     空格     32
    *
    * */

    var div = document.querySelector('div');

    var leftonoff = false;
    var rightonoff = false;
    var bottomonoff = false;
    var toponoff = false;

    document.onkeydown = function(ev){

        if(ev.keyCode==37){
            if(leftonoff) return;
            leftonoff = true;
            clearInterval(div.leftTimer);
            div.leftTimer = setInterval(function(){
                var left = div.offsetLeft - 10;
                if(left<=0){
                    left = 0;
                    clearInterval(div.leftTimer);
                }
                div.style.left = left + 'px';
            },10);
        }

        if(ev.keyCode==38){
            if(toponoff) return;
            toponoff = true;
            clearInterval(div.topTimer);
            div.topTimer = setInterval(function(){

                var _top = div.offsetTop - 10;
                if(_top<=0){
                    _top = 0;
                    clearInterval(div.topTimer);
                }
                div.style.top = _top + 'px';
            },10);
        }


        if(ev.keyCode==39){

            if(rightonoff) return;

            rightonoff = true;

            clearInterval(div.rightTimer);
            div.rightTimer = setInterval(function(){

                var right = div.offsetLeft + 10;
                if(right>=window.innerWidth-div.offsetWidth){
                    right = window.innerWidth-div.offsetWidth;
                    clearInterval(div.rightTimer);
                }

                div.style.left = right + 'px';
            },10);
        }

        if(ev.keyCode==40){

            if(bottomonoff) return;

            bottomonoff = true;

            clearInterval(div.bottomTimer);
            div.bottomTimer = setInterval(function(){

                var bottom = div.offsetTop + 10;
                if(bottom>=window.innerHeight-div.offsetHeight){
                    bottom = window.innerHeight-div.offsetHeight;
                    clearInterval(div.bottomTimer);
                }

                div.style.top = bottom + 'px';
            },10);

        }


    };

    document.onkeyup = function(ev){

        if(ev.keyCode==39){
            rightonoff = false;
            clearInterval(div.rightTimer);
        }
        if(ev.keyCode==40){
            bottomonoff = false;
            clearInterval(div.bottomTimer);
        }
        if(ev.keyCode==37){
            leftonoff = false;
            clearInterval(div.leftTimer);
        }
        if(ev.keyCode==38){
            toponoff = false;
            clearInterval(div.topTimer);
        }


    }




</script>

</body>
</html>