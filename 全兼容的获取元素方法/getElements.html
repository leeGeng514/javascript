<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<ul>
    <li class="li"></li>
    <li></li>
    <li class="li"></li>
    <li></li>
    <li></li>
    <li class="li"></li>
    <li></li>
</ul>
<script>
    /************** 全兼容的获取元素方法 ****************/
    function $(name) {
        var firstStr=name.charAt(0); //获取传入参数的第一个字符 用来做判断 进入哪一个获取元素的模式
        var arr=[]; //放className 一样的元素数组

        //如果传入参数第一个字符为'#' 则用ById的方法
        if(firstStr==='#'){
            return document.getElementById(name.slice(1));
        }else if(firstStr==='.'){ //如果传入参数第一个字符为'.' 则用className 方法

            var allEle=document.getElementsByTagName('*');//获取页面上所有的元素

            for(var i=0;i<allEle.length;i++){ //循环遍历页面所有元素
                var dot=name.slice(1); //截取掉传入参数的第一个字符 也就是'.'
                var classArr=allEle[i].className.split(' '); //通过空格把元素的className 拆分成数组
                for (var j=0;j<classArr.length;j++){  //遍历数组 如果数组内有与传入参数相匹配 则放入arr内
                    if (classArr[j]===dot){
                        arr.push(allEle[i]);
                    }
                }
            }
            return arr;
        }else{
            return document.getElementsByTagName(name);
        }
    }

    var lis=$('.li');
    for(var i=0;i<lis.length;i++){
        lis[i].style.backgroundColor='red';
    }
</script>
</body>
</html>